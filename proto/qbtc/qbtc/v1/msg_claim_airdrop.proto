syntax = "proto3";
package qbtc.qbtc.v1;

import "amino/amino.proto";
import "cosmos/msg/v1/msg.proto";
import "gogoproto/gogo.proto";
import "qbtc/qbtc/v1/type_airdrop.proto";

option go_package = "github.com/btcq-org/qbtc/x/qbtc/types";

// MsgClaimAirdrop is the message for claiming an airdrop using a ZK proof.
// The user proves ownership of a Bitcoin address without revealing their private key.
// The proof is bound to a specific epoch, and only proofs for the current epoch
// are accepted for new claims.
message MsgClaimAirdrop {
  option (cosmos.msg.v1.signer) = "claimer";
  option (amino.name) = "qbtc/MsgClaimAirdrop";

  // The address on the qbtc chain that will receive the airdrop
  string claimer = 1;

  // The Hash160 of the Bitcoin public key being claimed (20 bytes)
  bytes btc_address_hash = 2;

  // The ZK proof proving ownership of the Bitcoin address
  // This proof is bound to the specified epoch_id
  ZKProof proof = 3 [(gogoproto.nullable) = false];

  // The epoch ID this proof was generated for
  // Must match the current epoch for new claims
  uint64 epoch_id = 4;
}

// MsgClaimAirdropResponse is the response for a successful airdrop claim.
message MsgClaimAirdropResponse {
  // The amount of tokens claimed
  uint64 amount_claimed = 1;
}
